#include "glang.h"

int main()
{
    gLang langStruct;
    gLang *ctx = &langStruct;
    gLang_ctor(ctx, stderr);
    // gLang_lexer(ctx, "main(x){if (f(x, 12, 4) < 18) return 1;}");
    gLang_lexer(ctx, "a + b < 10 * 3 = 10 - 3");
    FILE *out = fopen("before.gv", "w");
    gTree_dumpPoolGraphViz(&ctx->tree, out);
    fclose(out);

    gLang_parser_expr(ctx, ctx->tree.root);
    out = fopen("after.gv", "w");
    gTree_dumpPoolGraphViz(&ctx->tree, out);
    fclose(out);

    gLang_dtor(ctx);
}
